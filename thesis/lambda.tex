\tracingonline 1\tracingmacros 2
%% Apply a function to an
%% argument.
\def\App#1#2{#1\Eval {#2}}

\def\Abs#1.#2{\begingroup%%
  \def\Eval##1{
      %% Evaluate the value given to x by making the
      %% control sequence \x return the captured 
      %% value ##1.
      \expandafter\def\csname #1\endcsname{##1} %%
      %% Evaluate the body with control sequence 
      %% \x properly defined.
      #2
      \endgroup}}

\def\Identity{\Abs x.{\x}}

\App\Identity {yfoo}

\def\Zero{\Abs s.{\Abs z.{\z}}}
\App {\App\Zero {s}} z

\def\Succ{\Abs n.{\Abs s.{\Abs z. \App\s {\App\n {\App\s \z}}}}}
\App {\App{\App\Succ \Zero} s} z}


