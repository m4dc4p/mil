\begin{tabular}{lr}
  \begin{minipage}[t]{\widthof{\ \ \ccblock k4(x)y: Right y}}
    \begin{AVerb}[gobble=6,numbers=left]
      \block b1():
        \vbinds f<-\mkclo[k1:];
        \vbinds g<-\mkclo[k3:];
        \goto b2(f, g)
      \block b2 (f, g):
        \vbinds t<-\app f*g/; \label{uncurry_loop_fg}
        \vbinds u<-\app g*t/;
        \goto b3(t, u, f)
      \block b3 (t, u, f):
        \vbinds v<-\app f*t/; \label{uncurry_loop_ft}
        \vbinds w<-\mkclo[k4:v]; \label{uncurry_loop_w}
        \goto b2(f, w)
      \ccblock k1()x: \mkclo[k2:x]
      \ccblock k2(x)y: Left y
      \ccblock k3()x: \mkclo[k4:x]
      \ccblock k4(x)y: Right y
    \end{AVerb}
  \end{minipage} &
  \begin{tikzpicture}[baseline=(b1.north)]
    \node[stmt] (b1) {\block b1():};
    \node[stmt, below=.5in of b1] (b2) {\block b2 (f, g):};
    \node[stmt, below=.5in of b2] (b3) {\block b3 (t, u, f):};

    \node[invis,overlay,below right=.02in and -.2in of b1] () {\mfun{out}(\lab b1/): $\{\var f/\,:\,\mkclo[k1:]\unskip\}, \{\var g/\,:\,\mkclo[k3:]\unskip\}$};

    \node[invis,overlay,below right=.3in and -.2in of b1] () {\mfun{in}(\lab b2/): $\{\var f/\,:\,\mkclo[k1:]\unskip\}, \{\var g/\,:\,\top\}$};

    \node[invis,overlay,below right=1in and -.2in of b1] () {$\{\var t/\,:\,\top\}, \{\var u/\,:\,\top\}$};

    \node[invis,overlay,below right=1.8in and -.2in of b1] () {\mfun{out}(\lab b3/): $\{\var g/\,:\,\mkclo[k4:v]\unskip\}$};

    \draw [->] (b1) to (b2);
    \draw [->] (b2) to (b3);
    \pausemd{\draw [->] (b3.south) to ($(b3.south) + (0mm, -.25in)$) -| ($(b2.west) + (-.25in, 0mm)$) to (b2.west);}
  \end{tikzpicture}\\\\
  \hfil\scap{uncurry_loop_a} & \scap{uncurry_loop_b}\hfil
\end{tabular}
