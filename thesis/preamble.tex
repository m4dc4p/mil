%&PDFLATEX
\makeatletter\@ifclassloaded{report}{}
  {\documentclass[12pt]{report}
    \usepackage{standalone}
    \input{tikz.preamble}
    %% Indicates the preamble declared the 
    %% documentclass
    \def\preambledocclass{}}

\usepackage[T1]{fontenc}
%% Footnotes with old style caps hard to read - this helps.
\renewcommand\@makefnmark{\mbox{\textsuperscript{%
      \normalfont\ensuremath{\@thefnmark}}}}
\usepackage{etoolbox}
\usepackage{calc}
\usepackage[osf,sc]{mathpazo}
\renewcommand\ttdefault{lmtt}
\usepackage{helvet}
\usepackage{xspace}
\usepackage{url}
\usepackage{fancyvrb}
%% Make sure line numbers are printed with math numerals,
%% not old-style numbers
\renewcommand{\theFancyVerbLine}{\scriptsize\ensuremath{\number\value{FancyVerbLine}}}
\usepackage[doublespacing]{setspace}
%% below only necessary when using doublespacing -- corrects
%% the vertical space inserted when switching to singlespace
%% environment.
\def\correctspaceskip{\vskip-\baselineskip} 
\usepackage{amsmath}
\usepackage{booktabs}
\usepackage[margin=\parindent, format=hang,labelfont=bf]{caption}
%% \usepackage[subrefformat=parens]{subcaption}
%% The following makes sure we get parentheses around
%% subreferences. The newest version of the subcaption
%% package has an option for this, but that's not available
%% widely.
%%
%% From http://tex.stackexchange.com/questions/25644
\usepackage[labelformat=simple]{subcaption}
\def\thesubfigure{(\alph{subfigure})}
\providecommand\thefigsubsep{~}
\def\p@subfigure{\@nameuse{thefigure}\thefigsubsep}

\usepackage{ifthen}
\usepackage{stmaryrd}
\usepackage{longtable}
\usepackage{afterpage}
\usepackage{xifthen}
\usepackage{mathtools}
\usepackage[natbib=true,style=authoryear,backend=bibtex8]{biblatex}
\setlength{\bibitemsep}{\bigskipamount}
\addbibresource{thesis.bib}
\usepackage{microtype}
\usepackage[normalem]{ulem}

\usepackage{fancyhdr}
%% GSO margins. The height of page numbers must be included in
%% the bottom margin (fancy header doesn't handle them correctly, otherwise).
\usepackage[left=1.5in, right=1in, top=1in, bottom=1in+\heightof{1},includeheadfoot]{geometry}
\usepackage{array}
\usepackage{abstract}

%% GSO requires 12 pt font for all chapter headings
\usepackage[bf,sf,tiny,compact]{titlesec}
\titleformat{\chapter}[display]
            {}% format
            {\sffamily\bfseries\chaptertitlename\ \thechapter}
            {\baselineskip}
            {\sffamily\bfseries}
            {}
%% Reduce vertical space above chapter headings on chapter
%% pages.
\titlespacing*{\chapter}{0pt}{0pt}{2\bigskipamount}

%% GSO TOC requirements.
\usepackage{tocloft}
%% Make room to set ``Chapter N  '' 
\setlength\cftchapnumwidth{\widthof{Chapter\ \ 9\quad}}
%% Chapter entries in TOC need to include ``Chapter''
\renewcommand\cftchappresnum{Chapter\ \ }
\renewcommand\cftchapaftersnum{\quad}
%% Make ``Contents'' and ``List of Figures'' 12 pt Sans Serif
\renewcommand\cfttoctitlefont{\sffamily\bfseries\normalsize}
\renewcommand\cftloftitlefont{\sffamily\bfseries\normalsize}
%% Reduce vertical space above ``Contents'' and ``List of Figures''
\setlength\cftbeforetoctitleskip{0pt}
\setlength\cftbeforeloftitleskip{0pt}
%% Ensure entries in LOF are on the left margin.
\setlength\cftfigindent{0pt}
%% Make List of Figures title consistent with Contents
%%\renewcommand\listfigurename{Figures}

\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\small\textsc{\chaptertitlename\ \thechapter}}
\fancyhead[R]{\small\leftmark}
\fancyfoot[C]{\small\thepage}
%% \fancyfoot[R]{\small Draft of \today}
\fancyfoot[R]{}
\headheight=15pt
\fancypagestyle{plain}{%
  \fancyhf{} % clear all header and footer fields
  \fancyfoot[C]{\small\thepage}
  %%\fancyfoot[R]{\small Draft of \today}
}
\renewcommand\headrulewidth{0pt}
\renewcommand\chaptermark[1]{\markboth{#1}{}}

\input{common}\let\alt=\altM %%  Beamer uses \alt, so we changed the
                             %%  name to \altM. This maintains
                             %%  compatability.

%% Indicates the preamble has been loadd.
\def\preambleloaded{}

%% All of lhs2tex's included definitions.
\input{lhs2tex}

%% Ensure haskell code with line numbers does not extend into
%% the left margin
\numberwidth{\widthof{\,\rmfamily\scriptsize\ensuremath{99}\ \,}}

%% Remove indent that lhs2tex forces on 
%% displayed haskell code
\makeatother
